<!DOCTYPE html>
<HTML lang="en">
    <HEAD>
        <META charset="utf-8"/>
        <META name="viewport" content="width=device-width, initial-scale=1"/>
        <TITLE>Online Booking System</TITLE>

        <LINK rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
            integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
            crossorigin="anonymous" referrerpolicy="no-referrer"/>
            
        <LINK rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
            integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
            crossorigin="anonymous"/>
        <LINK href="/styles/grid.css" rel="stylesheet"/>
        <LINK href="/styles/wizard.css" rel="stylesheet"/>

        <SCRIPT type="text/javascript" src="/javascript/config.js"></SCRIPT>
        <SCRIPT type="text/javascript" src="/javascript/initialise.js"></SCRIPT>
        <SCRIPT type="text/javascript" src="/javascript/bookingAPI.js"></SCRIPT>
        <SCRIPT type="text/javascript" src="/javascript/booking.js"></SCRIPT>
        <SCRIPT type="text/javascript" src="/javascript/showError.js"></SCRIPT>
        <SCRIPT type="text/javascript" src="/javascript/signInOutUp.js"></SCRIPT>
        <SCRIPT type="text/javascript" src="/javascript/dateUtils.js"></SCRIPT>

        <SCRIPT type="text/javascript">
            window.onload = function() {
                signedInGuard();

                const booking = new Booking();
                fromCityName2.innerText = booking.getFromCityName();
                fromCityName3.innerText = booking.getFromCityName();

                toCityName2.innerText = booking.getToCityName();
                toCityName3.innerText = booking.getToCityName();

                totalCost.innerText = booking.getTotalCost();
                numPassengers.innerText = booking.getNumPassengers();
                hideUnnecessaryPassengerGUIs(booking.getNumPassengers());

                fromCityDate.innerText = toLocaleDate(new Date(booking.getLeaveDate()), booking.getTimezone());
                toCityDate.innerText = toLocaleDate(new Date(booking.getReturnDate()), booking.getTimezone());

                fromCityTime.innerHTML = buildTimeHtml(booking.getLeaveTime());
                toCityTime.innerHTML = buildTimeHtml(booking.getReturnTime());

                returnFlightBookingGUI.style.display = booking.isReturnTrip() ? '' : 'none';

                outboundTripCost.innerText = booking.getNumPassengers() + ' \u00D7 $' + booking.getOutboundFlightCost();
                returnTripCost.innerText = booking.getNumPassengers() + ' \u00D7 $' + booking.getInboundFlightCost();

                if (booking.hasRentalCarName()) {
                    rentalCarBookingGUI.innerHTML = booking.getRentalCarName() + ' <small class="text-muted fst-italic">($' + booking.getRentalCarCost() + ' per day)</small>';
                    rentalCarCostBookingGUI.innerText = calcNumDays(booking) + ' \u00D7 $' + booking.getRentalCarCost();
                }
                else {
                    rentalCarBookingGUI.innerHTML = '<span class="text-muted fst-italic">No rental car</span>'
                }

                if (booking.hasTravelInsuranceName()) {
                    travelInsuranceBookingGUI.innerHTML = booking.getTravelInsuranceName() + ' <small class="text-muted fst-italic">($' + booking.getTravelInsuranceCost() + ' per person)</small>';
                    travelInsuranceCostBookingGUI.innerText = booking.getNumPassengers() + ' \u00D7 $' + booking.getTravelInsuranceCost();
                }
                else {
                    travelInsuranceBookingGUI.innerHTML = '<span class="text-muted fst-italic">No travel insurance</span>'
                }

                updateSignInGui();
            }

            function hideUnnecessaryPassengerGUIs(numPassengers) {
                const booking = new Booking();
                if (numPassengers < 6) {
                    mainForm.removeChild(passenger6);
                }
                else {
                    title6.value = booking.getTitle6();
                    firstName6.value = booking.getFirstName6();
                    lastName6.value = booking.getLastName6();
                    emailAddress6.value = booking.getEmailAddress6();
                    phoneNumber6.value = booking.getPhoneNumber6();
                    specialAssistance6.value = booking.getSpecialAssistance6();
                }

                if (numPassengers < 5) {
                    mainForm.removeChild(passenger5);
                }
                else {
                    title5.value = booking.getTitle5();
                    firstName5.value = booking.getFirstName5();
                    lastName5.value = booking.getLastName5();
                    emailAddress5.value = booking.getEmailAddress5();
                    phoneNumber5.value = booking.getPhoneNumber5();
                    specialAssistance5.value = booking.getSpecialAssistance5();
                }

                if (numPassengers < 4) {
                    mainForm.removeChild(passenger4);
                }
                else {
                    title4.value = booking.getTitle4();
                    firstName4.value = booking.getFirstName4();
                    lastName4.value = booking.getLastName4();
                    emailAddress4.value = booking.getEmailAddress4();
                    phoneNumber4.value = booking.getPhoneNumber4();
                    specialAssistance4.value = booking.getSpecialAssistance4();
                }

                if (numPassengers < 3) {
                    mainForm.removeChild(passenger3);
                }
                else {
                    title3.value = booking.getTitle3();
                    firstName3.value = booking.getFirstName3();
                    lastName3.value = booking.getLastName3();
                    emailAddress3.value = booking.getEmailAddress3();
                    phoneNumber3.value = booking.getPhoneNumber3();
                    specialAssistance3.value = booking.getSpecialAssistance3();
                }

                if (numPassengers < 2) {
                    mainForm.removeChild(passenger2);
                }
                else {
                    title2.value = booking.getTitle2();
                    firstName2.value = booking.getFirstName2();
                    lastName2.value = booking.getLastName2();
                    emailAddress2.value = booking.getEmailAddress2();
                    phoneNumber2.value = booking.getPhoneNumber2();
                    specialAssistance2.value = booking.getSpecialAssistance2();
                }

                title1.value = booking.getTitle1();
                firstName1.value = booking.getFirstName1();
                lastName1.value = booking.getLastName1();
                emailAddress1.value = booking.getEmailAddress1();
                phoneNumber1.value = booking.getPhoneNumber1();
                specialAssistance1.value = booking.getSpecialAssistance1();
            }

            function previousButtonClicked() {
                window.location.href = "/booking/selectFlights.html";
            }

            function nextButtonClicked() {
                const forms = document.querySelectorAll('.needs-validation');
                Array.from(forms).forEach(form => {
                    if (form.checkValidity()) {
                        saveBooking();
                        document.location.href = "/booking/extras.html";
                    }
                    else {
                        event.preventDefault();
                        event.stopPropagation();
                        form.classList.add('was-validated');
                    }
                }, false);
            }

            function saveBooking() {
                const booking = new Booking();
                if (booking.getNumPassengers() >= 6) {
                    booking.setTitle6(title6.value);
                    booking.setFirstName6(firstName6.value);
                    booking.setLastName6(lastName6.value);
                    booking.setEmailAddress6(emailAddress6.value);
                    booking.setPhoneNumber6(phoneNumber6.value);
                    booking.setSpecialAssistance6(specialAssistance6.value);
                }
                if (booking.getNumPassengers() >= 5) {
                    booking.setTitle5(title5.value);
                    booking.setFirstName5(firstName5.value);
                    booking.setLastName5(lastName5.value);
                    booking.setEmailAddress5(emailAddress5.value);
                    booking.setPhoneNumber5(phoneNumber5.value);
                    booking.setSpecialAssistance5(specialAssistance5.value);
                }
                if (booking.getNumPassengers() >= 4) {
                    booking.setTitle4(title4.value);
                    booking.setFirstName4(firstName4.value);
                    booking.setLastName4(lastName4.value);
                    booking.setEmailAddress4(emailAddress4.value);
                    booking.setPhoneNumber4(phoneNumber4.value);
                    booking.setSpecialAssistance4(specialAssistance4.value);
                }
                if (booking.getNumPassengers() >= 3) {
                    booking.setTitle3(title3.value);
                    booking.setFirstName3(firstName3.value);
                    booking.setLastName3(lastName3.value);
                    booking.setEmailAddress3(emailAddress3.value);
                    booking.setPhoneNumber3(phoneNumber3.value);
                    booking.setSpecialAssistance3(specialAssistance3.value);
                }
                if (booking.getNumPassengers() >= 2) {
                    booking.setTitle2(title2.value);
                    booking.setFirstName2(firstName2.value);
                    booking.setLastName2(lastName2.value);
                    booking.setEmailAddress2(emailAddress2.value);
                    booking.setPhoneNumber2(phoneNumber2.value);
                    booking.setSpecialAssistance2(specialAssistance2.value);
                }
                booking.setTitle1(title1.value);
                booking.setFirstName1(firstName1.value);
                booking.setLastName1(lastName1.value);
                booking.setEmailAddress1(emailAddress1.value);
                booking.setPhoneNumber1(phoneNumber1.value);
                booking.setSpecialAssistance1(specialAssistance1.value);
            }
        </SCRIPT>
    </HEAD>
    <BODY>
        <NAV class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <DIV class="container-fluid">
                <A class="navbar-brand" href="/">Home</A>
                <BUTTON class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <SPAN class="navbar-toggler-icon"/>
                </BUTTON>
                <DIV class="collapse navbar-collapse" id="navbarCollapse">
                    <UL class="navbar-nav me-auto mb-2 mb-md-0">
                        <LI class="nav-item">
                            <A class="nav-link" href="/info/listAeroplanes.html">Aeroplanes</A>
                        </LI>
                        <LI class="nav-item">
                            <A class="nav-link" href="/booking/listBookings.html">Bookings</A>
                        </LI>
                        <LI class="nav-item">
                            <BUTTON class="btn btn-success" type="button" onclick="window.location.href = '/booking/bookAFlight.html'">
                                <i class="fa-solid fa-plane"></i>&nbsp;Book a Flight</BUTTON>
                        </LI>
                    </UL>
                    <div class="d-flex align-items-center">
                        <SPAN id="signedInUserSpan" class="text-light" style="display: none;">Signed in as <SPAN class="text-primary me-3" id="signedInUserDisplayName"></SPAN></SPAN>
                        <BUTTON class="btn btn-warning" id="signUpButton" onclick="signUp();">Sign Up</BUTTON>&nbsp;
                        <BUTTON class="btn btn-success" id="signInButton" onclick="signIn();">Sign In</BUTTON>
                        <DIV class="btn-group" id="userDropDownDiv">
                            <BUTTON class="btn btn-success dropdown-toggle" type="button" id="userDropDown" data-bs-toggle="dropdown" data-bs-auto-close="true" aria-expanded="false">
                                <i class="fa-solid fa-bars"></i>
                            </BUTTON>
                            <UL class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="userDropDown">
                              <LI><BUTTON class="dropdown-item" type="button" id="userAccountMenuItem" onclick="editUserAccount();">User Account</A></LI>
                              <LI><HR class="dropdown-divider"></LI>
                              <LI><BUTTON class="dropdown-item" type="button" id="signOutMenuItem" onclick="signOut();">Sign Out</BUTTON></LI>
                            </UL>
                        </DIV>
                    </div>
                </DIV>
            </DIV>
        </NAV>
        <MAIN class="container">
            <HEADER class="pb-3 mt-3 mb-5 border-bottom">
                <h1 class="h1 d-flex align-items-center text-dark text-decoration-none">
                    <i class="fa-solid fa-people-group"></i>
                    <span>&nbsp;Book a Flight</span>
                </h1>
            </header>

            <DIV class="row mb-5">
                <ul class="wizard-progress">
                    <li class="wizard-step completed" id="searchStep" onclick="window.location.href='/booking/bookAFlight.html?source=session';">Search</li>
                    <li class="wizard-step completed" id="searchFlights" onclick="window.location.href='/booking/selectFlights.html';">Flights</li>
                    <li class="wizard-step active" id="searchPassengers">Passengers</li>
                    <li class="wizard-step" id="searchExtras">Extras</li>
                    <li class="wizard-step" id="searchSeats">Seats</li>
                    <li class="wizard-step" id="searchConfirm">Confirm</li>
                    <li class="wizard-step" id="searchInvoice">Invoice</li>
                </ul>
            </DIV>

            <div class="row">
                <div class="col-md-7">
                    <h4 class="mb-3 text-primary">Passenger Details</h4>

                    <FORM id="mainForm" class="needs-validation" novalidate>

                        <DIV class="card mb-5" id="passenger1">
                            <DIV class="card-header">Passenger 1</DIV>
                            <DIV class="card-body">
                                <DIV class="row">
                                    <DIV class="col-2">
                                        <LABEL for="title">Title</LABEL>
                                        <INPUT type="text" class="form-control" id="title1" name="title1" placeholder="Title" maxlength="4"/>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="firstName">First Name</LABEL>
                                        <INPUT type="text" class="form-control" id="firstName1" name="firstName1" placeholder="First Name" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a first name</div>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="lastName">Last Name</LABEL>
                                        <INPUT type="text" class="form-control" id="lastName1" name="lastName1" placeholder="Last Name" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a last name</div>
                                    </DIV>
                                </DIV>
            
                                <DIV class="row mt-3">
                                    <DIV class="col">
                                        <LABEL for="emailAddress">Email Address</LABEL>
                                        <INPUT type="email" class="form-control" id="emailAddress1" name="emailAddress1" placeholder="Email Address"/>
                                        <div class="invalid-feedback">Please leave empty, or enter a valid email address</div>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="phoneNumber">Phone Number</LABEL>
                                        <INPUT type="text" class="form-control" id="phoneNumber1" name="phoneNumber1" placeholder="Phone Number" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a phone number</div>
                                    </DIV>
                                </DIV>
            
                                <DIV class="row my-3">
                                    <DIV class="col">
                                        <LABEL for="specialAssistance">Special Assistance</LABEL>
                                        <INPUT type="text" class="form-control" id="specialAssistance1" name="specialAssistance1" placeholder="Special Assistance"/>
                                    </DIV>
                                </DIV>
                            </DIV>
                        </DIV>

                        <DIV class="card my-5" id="passenger2">
                            <DIV class="card-header">Passenger 2</DIV>
                            <DIV class="card-body">
                                <DIV class="row">
                                    <DIV class="col-2">
                                        <LABEL for="title">Title</LABEL>
                                        <INPUT type="text" class="form-control" id="title2" name="title2" placeholder="Title" maxlength="4"/>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="firstName">First Name</LABEL>
                                        <INPUT type="text" class="form-control" id="firstName2" name="firstName2" placeholder="First Name" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a first name</div>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="lastName">Last Name</LABEL>
                                        <INPUT type="text" class="form-control" id="lastName2" name="lastName2" placeholder="Last Name" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a last name</div>
                                    </DIV>
                                </DIV>
            
                                <DIV class="row mt-3">
                                    <DIV class="col">
                                        <LABEL for="emailAddress">Email Address</LABEL>
                                        <INPUT type="email" class="form-control" id="emailAddress2" name="emailAddress2" placeholder="Email Address"/>
                                        <div class="invalid-feedback">Please leave empty, or enter a valid email address</div>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="phoneNumber">Phone Number</LABEL>
                                        <INPUT type="text" class="form-control" id="phoneNumber2" name="phoneNumber2" placeholder="Phone Number" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a phone number</div>
                                    </DIV>
                                </DIV>
            
                                <DIV class="row my-3">
                                    <DIV class="col">
                                        <LABEL for="specialAssistance">Special Assistance</LABEL>
                                        <INPUT type="text" class="form-control" id="specialAssistance2" name="specialAssistance2" placeholder="Special Assistance"/>
                                    </DIV>
                                </DIV>
                            </DIV>
                        </DIV>

                        <DIV class="card my-5" id="passenger3">
                            <DIV class="card-header">Passenger 3</DIV>
                            <DIV class="card-body">
                                <DIV class="row">
                                    <DIV class="col-2">
                                        <LABEL for="title">Title</LABEL>
                                        <INPUT type="text" class="form-control" id="title3" name="title3" placeholder="Title" maxlength="4"/>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="firstName">First Name</LABEL>
                                        <INPUT type="text" class="form-control" id="firstName3" name="firstName3" placeholder="First Name" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a first name</div>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="lastName">Last Name</LABEL>
                                        <INPUT type="text" class="form-control" id="lastName3" name="lastName3" placeholder="Last Name" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a last name</div>
                                    </DIV>
                                </DIV>
            
                                <DIV class="row mt-3">
                                    <DIV class="col">
                                        <LABEL for="emailAddress">Email Address</LABEL>
                                        <INPUT type="email" class="form-control" id="emailAddress3" name="emailAddress3" placeholder="Email Address"/>
                                        <div class="invalid-feedback">Please leave empty, or enter a valid email address</div>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="phoneNumber">Phone Number</LABEL>
                                        <INPUT type="text" class="form-control" id="phoneNumber3" name="phoneNumber3" placeholder="Phone Number" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a phone number</div>
                                    </DIV>
                                </DIV>
            
                                <DIV class="row my-3">
                                    <DIV class="col">
                                        <LABEL for="specialAssistance">Special Assistance</LABEL>
                                        <INPUT type="text" class="form-control" id="specialAssistance3" name="specialAssistance3" placeholder="Special Assistance"/>
                                    </DIV>
                                </DIV>
                            </DIV>
                        </DIV>

                        <DIV class="card my-5" id="passenger4">
                            <DIV class="card-header">Passenger 4</DIV>
                            <DIV class="card-body">
                                <DIV class="row">
                                    <DIV class="col-2">
                                        <LABEL for="title">Title</LABEL>
                                        <INPUT type="text" class="form-control" id="title4" name="title4" placeholder="Title" maxlength="4"/>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="firstName">First Name</LABEL>
                                        <INPUT type="text" class="form-control" id="firstName4" name="firstName4" placeholder="First Name" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a first name</div>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="lastName">Last Name</LABEL>
                                        <INPUT type="text" class="form-control" id="lastName4" name="lastName4" placeholder="Last Name" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a last name</div>
                                    </DIV>
                                </DIV>
            
                                <DIV class="row mt-3">
                                    <DIV class="col">
                                        <LABEL for="emailAddress">Email Address</LABEL>
                                        <INPUT type="email" class="form-control" id="emailAddress4" name="emailAddress4" placeholder="Email Address"/>
                                        <div class="invalid-feedback">Please leave empty, or enter a valid email address</div>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="phoneNumber">Phone Number</LABEL>
                                        <INPUT type="text" class="form-control" id="phoneNumber4" name="phoneNumber4" placeholder="Phone Number" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a phone number</div>
                                    </DIV>
                                </DIV>
            
                                <DIV class="row my-3">
                                    <DIV class="col">
                                        <LABEL for="specialAssistance">Special Assistance</LABEL>
                                        <INPUT type="text" class="form-control" id="specialAssistance4" name="specialAssistance4" placeholder="Special Assistance"/>
                                    </DIV>
                                </DIV>
                            </DIV>
                        </DIV>

                        <DIV class="card my-5" id="passenger5">
                            <DIV class="card-header">Passenger 5</DIV>
                            <DIV class="card-body">
                                <DIV class="row">
                                    <DIV class="col-2">
                                        <LABEL for="title">Title</LABEL>
                                        <INPUT type="text" class="form-control" id="title5" name="title5" placeholder="Title" maxlength="4"/>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="firstName">First Name</LABEL>
                                        <INPUT type="text" class="form-control" id="firstName5" name="firstName5" placeholder="First Name" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a first name</div>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="lastName">Last Name</LABEL>
                                        <INPUT type="text" class="form-control" id="lastName5" name="lastName5" placeholder="Last Name" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a last name</div>
                                    </DIV>
                                </DIV>
            
                                <DIV class="row mt-3">
                                    <DIV class="col">
                                        <LABEL for="emailAddress">Email Address</LABEL>
                                        <INPUT type="email" class="form-control" id="emailAddress5" name="emailAddress5" placeholder="Email Address"/>
                                        <div class="invalid-feedback">Please leave empty, or enter a valid email address</div>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="phoneNumber">Phone Number</LABEL>
                                        <INPUT type="text" class="form-control" id="phoneNumber5" name="phoneNumber5" placeholder="Phone Number" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a phone number</div>
                                    </DIV>
                                </DIV>
            
                                <DIV class="row my-3">
                                    <DIV class="col">
                                        <LABEL for="specialAssistance">Special Assistance</LABEL>
                                        <INPUT type="text" class="form-control" id="specialAssistance5" name="specialAssistance5" placeholder="Special Assistance"/>
                                    </DIV>
                                </DIV>
                            </DIV>
                        </DIV>

                        <DIV class="card my-5" id="passenger6">
                            <DIV class="card-header">Passenger 6</DIV>
                            <DIV class="card-body">
                                <DIV class="row">
                                    <DIV class="col-2">
                                        <LABEL for="title">Title</LABEL>
                                        <INPUT type="text" class="form-control" id="title6" name="title6" placeholder="Title" maxlength="4"/>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="firstName">First Name</LABEL>
                                        <INPUT type="text" class="form-control" id="firstName6" name="firstName6" placeholder="First Name" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a first name</div>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="lastName">Last Name</LABEL>
                                        <INPUT type="text" class="form-control" id="lastName6" name="lastName6" placeholder="Last Name" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a last name</div>
                                    </DIV>
                                </DIV>
            
                                <DIV class="row mt-3">
                                    <DIV class="col">
                                        <LABEL for="emailAddress">Email Address</LABEL>
                                        <INPUT type="email" class="form-control" id="emailAddress6" name="emailAddress6" placeholder="Email Address"/>
                                        <div class="invalid-feedback">Please leave empty, or enter a valid email address</div>
                                    </DIV>
                                    <DIV class="col">
                                        <LABEL for="phoneNumber">Phone Number</LABEL>
                                        <INPUT type="text" class="form-control" id="phoneNumber6" name="phoneNumber6" placeholder="Phone Number" required/>
                                        <div class="valid-feedback">Looks good!</div>
                                        <div class="invalid-feedback">Please enter a phone number</div>
                                    </DIV>
                                </DIV>
            
                                <DIV class="row my-3">
                                    <DIV class="col">
                                        <LABEL for="specialAssistance">Special Assistance</LABEL>
                                        <INPUT type="text" class="form-control" id="specialAssistance6" name="specialAssistance6" placeholder="Special Assistance"/>
                                    </DIV>
                                </DIV>
                            </DIV>
                        </DIV>

                    </FORM>

                    <div class="row justify-content-between">
                        <div class="col col-md-auto">
                            <button type="button" class="btn btn-secondary mb-4" onclick="previousButtonClicked();">
                                <i class="fa-solid fa-circle-arrow-left"></i>&nbsp;Previous
                            </a>
                        </div>
                        <div class="col col-md-auto">
                            <button type="button" class="btn btn-primary mb-4"  onclick="nextButtonClicked();">
                                Next&nbsp;<i class="fa-solid fa-circle-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-4 order-md-last">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="text-primary">Your Booking</h4>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <span class="col">Num Passengers</span>
                                <span class="col text-end" id="numPassengers">1</span>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col"><h5 class="card-title">Outbound trip</h5></div>
                                <div class="col-md-auto text-end"><span id="outboundTripCost"></span></div>
                            </div>
                            <span class="text-success fw-bold" id="fromCityName2"></span> to <span class="text-success fw-bold" id="toCityName2"></span>
                            <p class="card-text">
                                <span id="fromCityDate"></span>&nbsp;<span id="fromCityTime"></span>
                            </p>
                            <span id="returnFlightBookingGUI">
                                <hr>
                                <div class="row">
                                    <div class="col"><h5 class="card-title">Return trip</h5></div>
                                    <div class="col-md-auto text-end"><span id="returnTripCost"></span></div>
                                </div>
                                <span class="text-success fw-bold" id="toCityName3"></span> to <span class="text-success fw-bold" id="fromCityName3"></span>
                                <p class="card-text">
                                    <span id="toCityDate"></span>&nbsp;<span id="toCityTime"></span>
                                </p>
                            </span>
                            <span id="extrasBookingGUI">
                                <hr>
                                <h5 class="card-title">Extras</h5>
                                <div class="row">
                                    <span class="col" id="rentalCarBookingGUI"></span>
                                    <span class="col-md-auto text-end" id="rentalCarCostBookingGUI"></span>
                                </div>
                                <div class="row">
                                    <span class="col" id="travelInsuranceBookingGUI"></span>
                                    <span class="col-md-auto text-end" id="travelInsuranceCostBookingGUI"></span>
                                </div>
                            </span>
                        </div>
                        <div class="card-footer">
                            <div class="row">
                                <span class="col">Total (NZD)</span>
                                <strong class="col text-end">$<span id="totalCost">0</span></strong>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <FOOTER class="container">
                <P>Built by Damian Coventry, Copyright &copy; 2022, all rights reserved. &middot; <A href="#">Privacy</A> &middot; <A href="#">Terms</A>
                </P>
                <P>Flight icon created by Freepik &middot; <A href="https://www.flaticon.com/free-icons/plane" title="plane icons">Flaticon</A>
                </P>
            </FOOTER>
        </MAIN>
<div class="modal fade" id="editUserAccountModal" tabindex="-1" aria-labelledby="editUserAccountTitle" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="editUserAccountTitle">Edit User Account</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"/>
            </div>
            <div class="modal-body">
                <FORM class="mb-4 needs-validation" novalidate>
                    <fieldset id="formFieldset">
                        <div class="text-center" id="editUserAccountSpinner">
                            <div class="spinner-border" role="status">
                                <span class="visually-hidden">Retrieving...</span>
                            </div>
                        </div>
                        <DIV id="userAccountForm" style="display: none;">
                            <DIV class="row">
                                <DIV class="col ms-auto text-end">
                                    <BUTTON type="button" class="btn btn-secondary"
                                        data-bs-toggle="tooltip" data-bs-placement="top"
                                        title="Change Password" onclick="changePassword();">
                                        <i class="fa-solid fa-key"></i>
                                    </BUTTON>
                                    <BUTTON class="btn btn-danger" type="button"
                                        data-bs-toggle="tooltip" data-bs-placement="top"
                                        title="Delete User Account" onclick="confirmDeleteUserAccount();">
                                        <i class="fa-solid fa-trash"></i>
                                    </BUTTON>
                                </DIV>
                            </DIV>
                            <DIV class="row">
                                <DIV class="col">
                                    <LABEL for="userName">Username</LABEL>
                                    <INPUT type="text" class="form-control" id="userName" placeholder="Username" required/>
                                    <div class="invalid-feedback">Please enter a unique name for the account</div>
                                </DIV>
                            </DIV>
                            <DIV class="row">
                                <DIV class="col">
                                    <LABEL for="emailAddress">Email Address</LABEL>
                                    <INPUT type="email" class="form-control" id="emailAddress" placeholder="Email Address" required/>
                                    <div class="valid-feedback">Looks good!</div>
                                    <div class="invalid-feedback">Please enter an email address</div>
                                </DIV>
                            </DIV>
                            <DIV class="row">
                                <DIV class="col">
                                    <LABEL for="firstName">First Name</LABEL>
                                    <INPUT type="text" class="form-control" id="firstName" placeholder="First Name" required/>
                                    <div class="valid-feedback">Looks good!</div>
                                    <div class="invalid-feedback">Please enter a first name</div>
                                </DIV>
                            </DIV>
                            <DIV class="row">
                                <DIV class="col">
                                    <LABEL for="lastName">Last Name</LABEL>
                                    <INPUT type="text" class="form-control" id="lastName" placeholder="Last Name" required/>
                                    <div class="valid-feedback">Looks good!</div>
                                    <div class="invalid-feedback">Please enter a last name</div>
                                </DIV>
                            </DIV>
                        </DIV>
                    </fieldset>
                </FORM>
            </div>
            <div class="modal-footer">
                <DIV class="col" id="saveSpinner" style="display: none;">
                    <span class="d-flex align-items-center justify-content-end">
                        <SPAN class="spinner-border text-end text-success" role="status"></SPAN>
                        <SPAN class="text-success fw-bold">&nbsp;Saving...</SPAN>
                    </span>
                </DIV>
                <button type="button" class="btn btn-primary" id="saveUserAccountButton" onclick="saveUserAccountButtonClicked();" disabled>
                    <i class="fa-solid fa-floppy-disk"></i>&nbsp;Save
                </button>
                <button type="button" class="btn btn-secondary" id="cancelUserAccountButton" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="finalConfirmation" tabindex="-1" aria-labelledby="deleteConfirmationTitle" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteConfirmationTitle">Are you sure?</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"/>
            </div>
            <div class="modal-body">
                This action cannot be undone. You will be logged out, and the user account will be <b>permanently</b> deleted.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" id="deleteButton" onclick="deleteUserAccount()">
                    <i class="fa-solid fa-trash"></i>&nbsp;Confirm
                </button>
                <button type="button" class="btn btn-secondary" id="cancelButton" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="responseCodePopup" class="toast fade" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header bg-danger">
            <strong class="me-auto text-white" id="errorMessageTitle"></strong>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body" id="errorMessageBody"></div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"
    integrity="sha512-2rNj2KJ+D8s1ceNasTIex6z4HWyOnEYLVC3FigGOmyQCZc2eBXKgOxQmo3oKLHyfcj53uz4QMsRCWNbLd32Q1g=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<SCRIPT src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></SCRIPT>

</BODY>
</HTML>
